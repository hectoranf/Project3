(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{122:function(e,t,a){e.exports=a(237)},128:function(e,t,a){},129:function(e,t,a){},135:function(e,t,a){},153:function(e,t,a){},154:function(e,t,a){},174:function(e,t){},175:function(e,t,a){},177:function(e,t,a){},178:function(e,t,a){},237:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(31),s=a.n(r),i=a(10),c=a(15),o=a(17),u=a(16),m=a(20),h=(a(127),a(128),a(22)),d=a(76),g=a(75),p=(a(129),function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleSubmit=function(e){e.preventDefault()},n.state={searchValue:""},n}return Object(c.a)(a,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(d.a,{className:"top-bar",fixed:"top",expand:"md"},l.a.createElement(d.a.Brand,{as:"div",className:"logo"},l.a.createElement(h.b,{to:"/"},"the",l.a.createElement("span",{className:"bold-weight"},"Watch"),"men")),l.a.createElement(d.a.Toggle,{"aria-controls":"basic-navbar-nav"}),this.props.user?l.a.createElement("nav",null,l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("input",{type:"search"}),l.a.createElement("button",{className:"form-button"},"Search")),l.a.createElement(h.c,{className:"form-button",to:"/meeting/create"},"Crea una quedada")):l.a.createElement(g.a,{className:"ml-auto"},l.a.createElement(g.a.Link,{as:"div",className:"ml-auto"},l.a.createElement(h.b,{to:"/login"},"Iniciar Sesion")),l.a.createElement(g.a.Link,{as:"div",className:"ml-auto"},l.a.createElement(h.b,{to:"/signup"},"Registro")))))}}]),a}(n.Component)),E=a(44),f=function(){return l.a.createElement(E.a,{as:"section",className:"landing-carousel"},l.a.createElement(E.a.Item,null,l.a.createElement("img",{className:"d-block w-100",src:"./img/landing/landing1.jpg",alt:"Landing Carrousel img"}),l.a.createElement(E.a.Caption,null,l.a.createElement("h3",null,"First slide label"),l.a.createElement("p",null,"Nulla vitae elit libero, a pharetra augue mollis interdum."))),l.a.createElement(E.a.Item,null,l.a.createElement("img",{className:"d-block w-100",src:"./img/landing/landing2.jpeg",alt:"Landing Carrousel img"}),l.a.createElement(E.a.Caption,null,l.a.createElement("h3",null,"First slide label"),l.a.createElement("p",null,"Nulla vitae elit libero, a pharetra augue mollis interdum."))),l.a.createElement(E.a.Item,null,l.a.createElement("img",{className:"d-block w-100",src:"./img/landing/landing3.jpeg",alt:"Landing Carrousel img"}),l.a.createElement(E.a.Caption,null,l.a.createElement("h3",null,"First slide label"),l.a.createElement("p",null,"Nulla vitae elit libero, a pharetra augue mollis interdum."))))},b=a(27),v=a(23),j=a(11),O=a(21),y=function(){return l.a.createElement(b.a,{as:"section"},l.a.createElement(v.a,null,l.a.createElement(j.a,{xl:3,lg:6},l.a.createElement(O.a,{as:"article"},l.a.createElement(O.a.Img,{variant:"top",src:"https://static.javatpoint.com/images/core/java-features.png"}),l.a.createElement(O.a.Body,null,l.a.createElement(O.a.Title,null,"Prueba"),l.a.createElement(O.a.Text,null,"Some quick example text to build on the card title and make up the bulk of the card's content.")))),l.a.createElement(j.a,{xl:3,lg:6},l.a.createElement(O.a,{as:"article"},l.a.createElement(O.a.Img,{variant:"top",src:"https://static.javatpoint.com/images/core/java-features.png"}),l.a.createElement(O.a.Body,null,l.a.createElement(O.a.Title,null,"Prueba"),l.a.createElement(O.a.Text,null,"Some quick example text to build on the card title and make up the bulk of the card's content.")))),l.a.createElement(j.a,{xl:3,lg:6},l.a.createElement(O.a,{as:"article"},l.a.createElement(O.a.Img,{variant:"top",src:"https://static.javatpoint.com/images/core/java-features.png"}),l.a.createElement(O.a.Body,null,l.a.createElement(O.a.Title,null,"Prueba"),l.a.createElement(O.a.Text,null,"Some quick example text to build on the card title and make up the bulk of the card's content.")))),l.a.createElement(j.a,{xl:3,lg:6},l.a.createElement(O.a,{as:"article"},l.a.createElement(O.a.Img,{variant:"top",src:"https://static.javatpoint.com/images/core/java-features.png"}),l.a.createElement(O.a.Body,null,l.a.createElement(O.a.Title,null,"Prueba"),l.a.createElement(O.a.Text,null,"Some quick example text to build on the card title and make up the bulk of the card's content."))))))},S=(a(135),function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={},e}return Object(c.a)(a,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(f,null),l.a.createElement(y,null))}}]),a}(n.Component)),I=a(50),C=a(12),w=a(9),N=a(42),k=a.n(N),M=function e(){var t=this;Object(i.a)(this,e),this.signup=function(e){var a=e.username,n=e.password,l=e.email,r=e.profilePic;return t.service.post("/signup",{username:a,password:n,email:l,profilePic:r})},this.login=function(e){var a=e.username,n=e.password;return t.service.post("/login",{username:a,password:n})},this.logout=function(){return t.service.post("/logout")},this.isLoggedIn=function(){return t.service.get("/loggedin")},this.service=k.a.create({baseURL:"".concat("https://thewatchmen.herokuapp.com/api","/auth"),withCredentials:!0})},U=function e(){var t=this;Object(i.a)(this,e),this.handleUpload=function(e){return t.service.post("/upload",e)},this.service=k.a.create({baseURL:"".concat("https://thewatchmen.herokuapp.com/api","/files"),withCredentials:!0})},P=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){var t=Object(C.a)({},n.state.userInfo),a=e.target,l=a.name,r=a.value;t=Object(C.a)(Object(C.a)({},t),{},Object(I.a)({},l,r)),n.setState({userInfo:t})},n.handleSubmit=function(e){e.preventDefault(),n.authService.signup(n.state.userInfo).then((function(e){n.props.setTheUser(e.data),n.props.history.push("/")})).catch((function(e){400===e.response.status&&n.setState({errorMessage:e.response.data.message})}))},n.handleFileUpload=function(e){var t=new FormData;t.append("profilePic",e.target.files[0]),n.filesService.handleUpload(t).then((function(e){console.log("Subida de archivo finalizada! La URL de Cloudinray es: ",e.data.secure_url);var t=Object(C.a)({},n.state.userInfo);t=Object(C.a)(Object(C.a)({},t),{},{profilePic:e.data.secure_url}),n.setState({userInfo:t})})).catch((function(e){return console.log(e)}))},n.state={userInfo:{username:"",password:"",email:"",profilePic:""},errorMessage:""},n.authService=new M,n.filesService=new U,n}return Object(c.a)(a,[{key:"render",value:function(){return l.a.createElement(b.a,null,l.a.createElement(w.a,{className:"form-style",onSubmit:this.handleSubmit},l.a.createElement(v.a,null,l.a.createElement(j.a,{md:{span:6,offset:3}},l.a.createElement("h3",{className:"form-title"},"Registro de usuario"),l.a.createElement("hr",null),l.a.createElement(w.a.Group,{controlId:"name"},l.a.createElement(w.a.Label,null,"Usuario"),l.a.createElement(w.a.Control,{name:"username",type:"text",value:this.state.username,onChange:this.handleInputChange})),l.a.createElement(w.a.Group,{controlId:"mail"},l.a.createElement(w.a.Label,null,"Email"),l.a.createElement(w.a.Control,{name:"email",type:"email",value:this.state.email,onChange:this.handleInputChange})),l.a.createElement(w.a.Group,{controlId:"pwd"},l.a.createElement(w.a.Label,null,"Contrase\xf1a"),l.a.createElement(w.a.Control,{name:"password",type:"password",value:this.state.password,onChange:this.handleInputChange})),l.a.createElement(w.a.Group,{controlId:"img"},l.a.createElement(w.a.Label,null,"Imagen de perfil"),l.a.createElement(w.a.Control,{name:"profilePic",type:"file",onChange:this.handleFileUpload})),l.a.createElement("p",{className:"error-message",style:{display:this.state.errorMessage?"block":"none"}},this.state.errorMessage),l.a.createElement("hr",null),l.a.createElement("button",{className:"form-button",type:"submit"},"Registrarme"),l.a.createElement("p",null,l.a.createElement("small",null,"\xbfYa tienes cuenta? ",l.a.createElement(h.b,{to:"/login",className:"link-form"},"Inicia sesi\xf3n")))))))}}]),a}(n.Component),T=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){var t=Object(C.a)({},n.state.loginInfo),a=e.target,l=a.name,r=a.value;t=Object(C.a)(Object(C.a)({},t),{},Object(I.a)({},l,r)),n.setState({loginInfo:t})},n.handleSubmit=function(e){e.preventDefault(),n.authService.login(n.state.loginInfo).then((function(e){n.props.setTheUser(e.data),n.props.history.push("/")})).catch((function(e){400===e.response.status&&n.setState({errorMessage:e.response.data.message})}))},n.state={loginInfo:{username:"",password:""},errorMessage:""},n.authService=new M,n}return Object(c.a)(a,[{key:"render",value:function(){return l.a.createElement(b.a,null,l.a.createElement(v.a,null,l.a.createElement(j.a,{md:{span:6,offset:3}},l.a.createElement("h3",{className:"form-title"},"Inicio de sesi\xf3n"),l.a.createElement("hr",null),l.a.createElement(w.a,{className:"form-style",onSubmit:this.handleSubmit},l.a.createElement(w.a.Group,{controlId:"name"},l.a.createElement(w.a.Label,null,"Usuario"),l.a.createElement(w.a.Control,{name:"username",type:"text",value:this.state.username,onChange:this.handleInputChange})),l.a.createElement(w.a.Group,{controlId:"pwd"},l.a.createElement(w.a.Label,null,"Contrase\xf1a"),l.a.createElement(w.a.Control,{className:"form-input ",name:"password",type:"password",value:this.state.password,onChange:this.handleInputChange})),l.a.createElement("p",{className:"error-message",style:{display:this.state.errorMessage?"block":"none"}},this.state.errorMessage),l.a.createElement("hr",null),l.a.createElement("button",{className:"form-button",type:"submit"},"Iniciar sesi\xf3n")),l.a.createElement("p",null,l.a.createElement("small",null,"\xbfNo tienes cuenta? ",l.a.createElement(h.b,{to:"/signup",className:"link-form"},"Reg\xedstrate"))))))}}]),a}(n.Component),L=function e(){var t=this;Object(i.a)(this,e),this.getAllMeetings=function(){return t.service.get("/getAll")},this.getByTitle=function(e){return t.service.get("/media?title=".concat(e))},this.getById=function(e){return t.service.get("/".concat(e))},this.createMeeting=function(e){return t.service.post("/create",{meeting:e})},this.joinMeeting=function(e){return t.service.post("/".concat(e,"/join"))},this.service=k.a.create({baseURL:"".concat("https://thewatchmen.herokuapp.com/api","/meeting"),withCredentials:!0})},_=(a(153),function(e){return l.a.createElement(j.a,{md:{span:10,offset:1},as:"article"},l.a.createElement(h.b,{to:"meeting/details/".concat(e._id),className:"search-card"},l.a.createElement("figure",null,l.a.createElement("img",{src:e.media.posterPic?"http://image.tmdb.org/t/p/w154".concat(e.media.posterPic):"./img/poster/defaultPoster.jpg",alt:e.media.title}),l.a.createElement("h2",null,e.media.title)),l.a.createElement("div",null,l.a.createElement("header",null,l.a.createElement("h1",null,e.meetingName),l.a.createElement("hr",null),l.a.createElement("p",null,l.a.createElement("span",{className:"regular-weight"},"Fecha"),": ","".concat(e.date.getDate()," - ").concat(e.date.getMonth()+1," - ").concat(e.date.getFullYear())),l.a.createElement("p",null,l.a.createElement("span",{className:"regular-weight"},"Hora"),": ",e.date.getHours(),":",e.date.getMinutes()<10?"0".concat(e.date.getMinutes()):e.date.getMinutes()),l.a.createElement("p",null,l.a.createElement("span",{className:"regular-weight"},"Lugares disponibles"),": ",e.freeSeats))),l.a.createElement("figure",null,l.a.createElement("img",{className:"avatar",src:e.creator.profilePic,alt:e.creator.username}),l.a.createElement("h2",null,e.creator.username))))}),x=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).getByTitle=function(t){e.meetingService.getByTitle(t).then((function(t){return e.setState({favouriteMeetings:t.data})})).catch((function(e){return console.log(e)}))},e.getMeetings=function(){e.meetingService.getAllMeetings().then((function(t){var a;t.data.map((function(e){return a=new Date(Date.parse(e.date)),e.date=a})),t.data.sort((function(e,t){return e.date-t.date})),e.setState({nearMeetings:t.data})})).catch((function(e){return console.log(e)}))},e.componentDidMount=function(){e.getMeetings()},e.state={myMeetings:[],favouriteMeetings:[],nearMeetings:[]},e.meetingService=new L,e}return Object(c.a)(a,[{key:"render",value:function(){return l.a.createElement(b.a,{fluid:!0},l.a.createElement(v.a,{as:"section"},this.state.nearMeetings.map((function(e){return l.a.createElement(_,Object.assign({key:e._id},e))}))))}}]),a}(n.Component),D=(a(154),function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).logout=function(){e.props.setTheUser(!1),e.authService.logout()},e.state={},e.authService=new M,e}return Object(c.a)(a,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("aside",{className:"side-bar"},l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("img",{src:this.props.user.profilePic,alt:this.props.user.username})," ",this.props.user.username),l.a.createElement("hr",null),l.a.createElement("li",null,l.a.createElement(h.c,{className:"side-link",to:"/"},"Quedadas")),l.a.createElement("li",null,l.a.createElement(h.c,{className:"side-link",to:"/following"},"Siguiendo")),l.a.createElement("hr",null),l.a.createElement("li",null,l.a.createElement(h.c,{className:"side-link",to:"/",onClick:this.logout},"Cerrar sesi\xf3n")))))}}]),a}(n.Component)),A=a(118),R=a.n(A),F=(a(174),function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={lat:40.4167754,lng:-3.7037901999999576},n.APIKey=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_API_URL:"https://thewatchmen.herokuapp.com/api",REACT_APP_URL:"https://thewatchmen.herokuapp.com/",REACT_APP_KEY:"AIzaSyAgMxlbpkXQlAsUQWBUbN-toHutzEMyYCs"}).GOOGLE_MAPS_API_KEY,n}return Object(c.a)(a,[{key:"handleDrag",value:function(e){console.log(e)}},{key:"render",value:function(){return l.a.createElement("div",{style:{height:"200px",width:"100%",zIndex:0}},l.a.createElement(R.a,{bootstrapURLKeys:{key:"AIzaSyAgMxlbpkXQlAsUQWBUbN-toHutzEMyYCs"},defaultCenter:this.props.pos&&this.props.pos,defaultZoom:this.props.zoom,yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:function(e){e.map,e.maps}}))}}]),a}(n.Component));F.defaultProps={center:{lat:40.4167754,lng:-3.7037901999999576},zoom:16};a(175);var B=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).getMeeting=function(e){n.meetingService.getById(e).then((function(e){var t=new Date(e.data.date);e.data.date=t,n.setState({meeting:e.data})})).catch((function(e){return console.log(e)}))},n.joinMeeting=function(){n.meetingService.joinMeeting(n.state.meeting._id).then((function(e){n.props.setTheUser(e.data),n.props.history.push("/")})).catch((function(e){return console.log(e)}))},n.componentDidMount=function(){n.getMeeting(n.props.match.params.id)},n.state={meeting:null},n.meetingService=new L,n}return Object(c.a)(a,[{key:"render",value:function(){return console.log("los props",this.props),l.a.createElement(b.a,{fluid:!0,className:"meeting-details"},this.state.meeting&&l.a.createElement(v.a,{as:"section"},l.a.createElement(j.a,{lg:{span:2,offset:0}},l.a.createElement("div",{className:"poster"},l.a.createElement("img",{src:this.state.meeting.media.posterPic?"http://image.tmdb.org/t/p/w154".concat(this.state.meeting.media.posterPic):"https://res.cloudinary.com/dba5fn3ws/image/upload/v1589985020/PosterDefault/defaultPoster_esgqhh.jpg",alt:this.state.meeting.media.title}))),l.a.createElement(j.a,{lg:{span:10,offset:0}},l.a.createElement("h2",null,this.state.meeting.media.title),l.a.createElement("h1",null,this.state.meeting.meetingName),!this.props.user.joinedMeetings.includes(this.state.meeting._id)&&this.state.meeting.freeSeats>0&&l.a.createElement("button",{onClick:this.joinMeeting,className:"form-button"},"Ap\xfantate a esta quedada")),l.a.createElement(j.a,{lg:2},l.a.createElement("div",{className:"avatar"},l.a.createElement("img",{src:this.state.meeting.creator.profilePic,alt:this.state.meeting.creator.username}),l.a.createElement("h3",{className:"username"},this.state.meeting.creator.username))),l.a.createElement(j.a,{lg:5},l.a.createElement(v.a,null,l.a.createElement(j.a,{as:"article",lg:12},l.a.createElement("header",null,l.a.createElement("h3",null,"Descripci\xf3n")),l.a.createElement("p",null,this.state.meeting.description),l.a.createElement("hr",null)),l.a.createElement(j.a,{as:"article",lg:12},l.a.createElement("header",null,l.a.createElement("h3",null,"Invitados")),l.a.createElement("div",{className:"participants"},this.state.meeting.participants.map((function(e){return l.a.createElement("div",{key:e._id},l.a.createElement("img",{src:e.profilePic,alt:e.username})," ",l.a.createElement("h4",null,e.username))}))),l.a.createElement("hr",null)),l.a.createElement(j.a,{as:"article",lg:12},l.a.createElement("header",null,l.a.createElement("h3",null,"Lista de la compra"))))),l.a.createElement(j.a,{lg:1,className:"separation"},l.a.createElement("div",null)),l.a.createElement(j.a,{lg:4},l.a.createElement(v.a,null,l.a.createElement(j.a,{lg:12,as:"article"},l.a.createElement("header",null,l.a.createElement("h3",null,"Datos")),l.a.createElement("p",null,l.a.createElement("span",{className:"regular-weight"},"Fecha"),": ","".concat(this.state.meeting.date.getDate()," - ").concat(this.state.meeting.date.getMonth()+1," - ").concat(this.state.meeting.date.getFullYear())),l.a.createElement("p",null,l.a.createElement("span",{className:"regular-weight"},"Hora"),": ",this.state.meeting.date.getHours()," : ",this.state.meeting.date.getMinutes()<10?"0".concat(this.state.meeting.date.getMinutes()):this.state.meeting.date.getMinutes()),l.a.createElement("p",null,l.a.createElement("span",{className:"regular-weight"},"Sitios libres"),": ",this.state.meeting.freeSeats),l.a.createElement("hr",null)),l.a.createElement(j.a,{as:"article",lg:12},l.a.createElement("header",null,l.a.createElement("h3",null,"Localizaci\xf3n")),l.a.createElement(F,{pos:this.state.meeting.location.coordinates,marker:!0}),l.a.createElement("hr",null)),l.a.createElement(j.a,{as:"article",lg:12})))),l.a.createElement("hr",null))}}]),a}(n.Component),q=a(88),G=a.n(q),H=(a(176),function(e){return l.a.createElement("article",{className:"card"},l.a.createElement("img",{src:"http://image.tmdb.org/t/p/w185".concat(e.posterPic),alt:e.title}),l.a.createElement("p",null,e.title))}),V=function e(){var t=this;Object(i.a)(this,e),this.getAll=function(e){return t.service.get("/getAll?title=".concat(e))},this.service=k.a.create({baseURL:"".concat("https://thewatchmen.herokuapp.com/api","/media"),withCredentials:!0})},z=a(91),K=(a(177),function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleModal=function(e){n.setState({modalShow:e})},n.initFollowingLists=function(){var e=[],t=[];n.props.user&&n.props.user.followingList.forEach((function(a){return"tv"===a.type?e.push(a):t.push(a)})),n.setState({tv:e,movie:t})},n.componentDidMount=function(){n.initFollowingLists()},n.state={tv:[],movie:[],modalShow:!1},n.MediaService=new V,n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"following"},l.a.createElement("h1",null,"Listas de tus favoritos"),l.a.createElement("section",null,l.a.createElement("header",null,l.a.createElement("h2",null,"Series que sigues"),l.a.createElement("button",{onClick:function(){return e.handleModal(!0)},className:"following-button"},"+")),this.state.tv.length>0&&l.a.createElement("hr",{className:"shadow-down"}),this.state.tv.length>0?l.a.createElement(G.a,{slidesPerPage:5,slidesPerScroll:2,arrows:!0},this.state.tv.map((function(e){return l.a.createElement(H,Object.assign({key:e._id},e))}))):l.a.createElement("article",{className:"msg"},l.a.createElement("p",null,"No est\xe1s siguiendo ninguna serie")),this.state.tv.length>0&&l.a.createElement("hr",{className:"shadow-up"})),l.a.createElement("section",null,l.a.createElement("header",null,l.a.createElement("h2",null,"Pel\xedculas que sigues"),l.a.createElement("button",{onClick:function(){return e.handleModal(!0)},className:"following-button"},"+")),this.state.movie.length>0&&l.a.createElement("hr",null),this.state.movie.length>0?l.a.createElement(G.a,{slidesPerPage:5,slidesPerScroll:2,arrows:!0},this.state.movie.map((function(e){return l.a.createElement(H,Object.assign({key:e._id},e))}))):l.a.createElement("article",{className:"msg"},l.a.createElement("p",null,"No est\xe1s siguiendo ninguna pel\xedcula")),this.state.movie.length>0&&l.a.createElement("hr",null)),l.a.createElement(z.a,{show:this.state.modalShow,onHide:function(){return e.handleModal(!1)},centered:!0},l.a.createElement(z.a.Body,null,l.a.createElement("h1",null,"Formulario para seguir"))))}}]),a}(n.Component)),W=(a(178),a(119)),Y=a.n(W),Q=(a(179),function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).createMeeting=function(){n.meetingService.createMeeting(n.state.meeting).then((function(e){n.props.setTheUser(e.data),n.props.history.push("/")})).catch((function(e){return console.log(e)}))},n.handleInputChange=function(e){var t=Object(C.a)({},n.state.meeting);t[e.target.name]=e.target.value,n.setState({meeting:t})},n.handleResultsVisibility=function(e){return n.setState(Object(C.a)(Object(C.a)({},n.state),{},{resultVisibility:e}))},n.handleMouseOver=function(e){return n.setState(Object(C.a)(Object(C.a)({},n.state),{},{mouseIsOver:e}))},n.setMedia=function(e){var t={title:"",type:e.media_type,idTMDB:e.id,posterPic:e.poster_path};"tv"===t.type?t.title=e.name:t.title=e.title;var a=Object(C.a)(Object(C.a)({},n.state.meeting),{},{media:t});document.getElementById("media-title").value=t.title,n.setState({meeting:a,resultVisibility:"none"})},n.handleSearch=function(e){var t=e.target.value;t.length>0?(n.handleResultsVisibility("block"),n.mediaService.getAll(t).then((function(e){n.setState(Object(C.a)(Object(C.a)({},n.state),{},{searchInput:t,results:e.data.results.filter((function(e){return"tv"===e.media_type||"movie"===e.media_type}))}))})).catch((function(e){return console.log(e)}))):(n.handleResultsVisibility("none"),n.setState(Object(C.a)(Object(C.a)({},n.state),{},{searchInput:t,results:[]})))},n.handleDate=function(e){var t=Object(C.a)({},n.state.meeting);t.date=e,n.setState({meeting:t})},n.handleLocation=function(e){var t=n.props.user.places[e.target.value].location,a=Object(C.a)(Object(C.a)({},n.state.meeting),{},{location:t});n.setState({meeting:a})},n.handleSubmit=function(e){e.preventDefault();var t=Object(C.a)(Object(C.a)({},n.state.meeting),{},{creator:n.props.user._id,seats:n.state.meeting.freeSeats});2!==t.location.coordinates.length&&(t.location.coordinates=n.props.user.places[0].location.coordinates),t.media.title||(t.media.title=n.state.searchInput),n.setState({meeting:t},(function(){return n.createMeeting()}))},n.state={meeting:{meetingName:"",media:{title:"",type:"tv",idTMDB:1,posterPic:""},date:new Date,description:"",seats:"",freeSeats:1,creator:"",location:{type:"Point",coordinates:[]},snackList:[]},results:[],resultVisibility:"none",mouseIsOver:"false",searchInput:""},n.mediaService=new V,n.meetingService=new L,n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement(b.a,{className:"creating-meeting"},l.a.createElement(v.a,null,l.a.createElement(j.a,{md:{span:8,offset:2}},l.a.createElement("h1",null,"Datos de la quedada"),l.a.createElement("hr",null),l.a.createElement(w.a,{onSubmit:this.handleSubmit},l.a.createElement(w.a.Group,{controlId:"media-title",onBlur:function(){return!e.state.mouseIsOver&&e.handleResultsVisibility("none")},onFocus:function(){return e.handleResultsVisibility("block")}},l.a.createElement(w.a.Label,null,"\xbfQu\xe9 vais a ver?"),l.a.createElement(w.a.Control,{name:"media-title",type:"text",placeholder:"Titulo...",onChange:this.handleSearch,autoComplete:"off",required:!0}),l.a.createElement("ul",{onMouseOver:function(){return e.handleMouseOver(!0)},onMouseOut:function(){return e.handleMouseOver(!1)},className:"search-results",style:{display:this.state.resultVisibility}},this.state.results.map((function(t,a){return l.a.createElement("li",{key:a,onClick:function(){return e.setMedia(t)}},t.poster_path&&l.a.createElement("img",{className:"miniature",src:"http://image.tmdb.org/t/p/w92".concat(t.poster_path),alt:"poster"}),l.a.createElement("p",null,"tv"===t.media_type?t.name:t.title))})))),l.a.createElement(w.a.Group,{controlId:"meetingName"},l.a.createElement(w.a.Label,null,"Pon nombre a tu quedada"),l.a.createElement(w.a.Control,{placeholder:"Ej: marat\xf3n de F\xb7R\xb7I\xb7E\xb7N\xb7D\xb7S",name:"meetingName",type:"textField",onChange:this.handleInputChange,value:this.state.meeting.meetingName,autoComplete:"off"})),l.a.createElement(w.a.Row,null,l.a.createElement(w.a.Group,{as:j.a,controlId:"freeSeats",md:"6"},l.a.createElement(w.a.Label,null,"\xbfCuantos invitados quieres que asistan?"),l.a.createElement(w.a.Control,{name:"freeSeats",type:"number",onChange:this.handleInputChange,value:this.state.meeting.freeSeats,autoComplete:"off"})),l.a.createElement(w.a.Group,{as:j.a,controlId:"date",md:"6"},l.a.createElement(w.a.Label,null,"\xbfCu\xe1ndo va a ser?"),l.a.createElement("br",null),l.a.createElement(Y.a,{className:"form-date",showTimeSelect:!0,selected:this.state.meeting.date,onChange:function(t){return e.handleDate(t)},timeFormat:"HH:mm",timeIntervals:15,timeCaption:"time",dateFormat:"yyyy/MM/dd hh:mm aa"}))),l.a.createElement(w.a.Group,{controlId:"desc"},l.a.createElement(w.a.Label,null,"Descripci\xf3n"),l.a.createElement(w.a.Control,{as:"textarea",placeholder:"Da a tus invitados una idea de c\xf3mo va a ser la quedada",name:"description",type:"text",onChange:this.handleInputChange,value:this.state.meeting.description,autoComplete:"off"})),l.a.createElement(w.a.Group,{controlId:"location"},l.a.createElement(w.a.Label,null,"\xbfD\xf3nde va a ser la quedada?"),l.a.createElement(w.a.Control,{as:"select",onChange:this.handleLocation,custom:!0},l.a.createElement("option",{value:"0"},"..."),this.props.user&&this.props.user.places.map((function(e,t){return l.a.createElement("option",{key:e._id,value:t},e.name)})))),l.a.createElement("hr",null),l.a.createElement("button",{className:"form-button",type:"submit"},"Crea tu quedada")))))}}]),a}(n.Component)),J=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).setTheUser=function(t){return e.setState({loggedInUser:t},(function(){return console.log("El estado de App ha cambiado:",e.state)}))},e.fetchUser=function(){null===e.state.loggedInUser&&e.authService.isLoggedIn().then((function(t){return e.setTheUser(t.data)})).catch((function(){return e.setTheUser(!1)}))},e.state={loggedInUser:null},e.authService=new M,e}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return this.fetchUser(),l.a.createElement(l.a.Fragment,null,l.a.createElement(p,{user:this.state.loggedInUser}),this.state.loggedInUser&&l.a.createElement(D,{user:this.state.loggedInUser,setTheUser:this.setTheUser}),l.a.createElement("main",{style:{marginLeft:this.state.loggedInUser&&"250px"}},l.a.createElement(m.d,null,l.a.createElement(m.b,{path:"/",exact:!0,render:function(){return e.state.loggedInUser?l.a.createElement(x,{user:e.state.loggedInUser}):l.a.createElement(S,null)}}),l.a.createElement(m.b,{path:"/signup",render:function(t){return l.a.createElement(P,Object.assign({},t,{setTheUser:e.setTheUser}))}}),l.a.createElement(m.b,{path:"/login",render:function(t){return l.a.createElement(T,Object.assign({},t,{setTheUser:e.setTheUser}))}}),l.a.createElement(m.b,{path:"/meeting/details/:id",render:function(t){return e.state.loggedInUser?l.a.createElement(B,Object.assign({},t,{user:e.state.loggedInUser,setTheUser:e.setTheUser})):l.a.createElement(m.a,{to:"/"})}}),l.a.createElement(m.b,{path:"/following",render:function(t){return e.state.loggedInUser?l.a.createElement(K,Object.assign({},t,{user:e.state.loggedInUser,setTheUser:e.setTheUser})):l.a.createElement(m.a,{to:"/"})}}),l.a.createElement(m.b,{path:"/meeting/create",render:function(t){return e.state.loggedInUser?l.a.createElement(Q,Object.assign({},t,{user:e.state.loggedInUser,setTheUser:e.setTheUser})):l.a.createElement(m.a,{to:"/"})}}))))}}]),a}(n.Component);s.a.render(l.a.createElement(h.a,null,l.a.createElement(J,null)),document.getElementById("root"))}},[[122,1,2]]]);
//# sourceMappingURL=main.7208f39f.chunk.js.map