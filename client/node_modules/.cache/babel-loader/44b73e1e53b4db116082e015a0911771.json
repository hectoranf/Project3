{"ast":null,"code":"import _defineProperty from\"/home/hector/Escritorio/ironkack/project3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/hector/Escritorio/ironkack/project3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/home/hector/Escritorio/ironkack/project3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/hector/Escritorio/ironkack/project3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/hector/Escritorio/ironkack/project3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/hector/Escritorio/ironkack/project3/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Link}from'react-router-dom';import Container from'react-bootstrap/Container';import Row from'react-bootstrap/Row';import Col from'react-bootstrap/Col';import Form from'react-bootstrap/Form';import AuthService from'./../../../service/auth.service';import FileService from'./../../../service/file.service';var Signup=/*#__PURE__*/function(_Component){_inherits(Signup,_Component);var _super=_createSuper(Signup);function Signup(props){var _this;_classCallCheck(this,Signup);_this=_super.call(this,props);_this.handleInputChange=function(e){var userInfoCopy=_objectSpread({},_this.state.userInfo);var _e$target=e.target,name=_e$target.name,value=_e$target.value;userInfoCopy=_objectSpread(_objectSpread({},userInfoCopy),{},_defineProperty({},name,value));_this.setState({userInfo:userInfoCopy});};_this.handleSubmit=function(e){e.preventDefault();_this.authService.signup(_this.state.userInfo).then(function(response){_this.props.setTheUser(response.data);_this.props.history.push('/');}).catch(function(err){err.response.status===400&&_this.setState({errorMessage:err.response.data.message});});};_this.handleFileUpload=function(e){var uploadData=new FormData();uploadData.append(\"profilePic\",e.target.files[0]);_this.filesService.handleUpload(uploadData).then(function(response){console.log('Subida de archivo finalizada! La URL de Cloudinray es: ',response.data.secure_url);var userInfoCopy=_objectSpread({},_this.state.userInfo);userInfoCopy=_objectSpread(_objectSpread({},userInfoCopy),{},{profilePic:response.data.secure_url});_this.setState({userInfo:userInfoCopy});}).catch(function(err){return console.log(err);});};_this.state={userInfo:{username:'',password:'',email:'',profilePic:''},errorMessage:''};_this.authService=new AuthService();_this.filesService=new FileService();return _this;}_createClass(Signup,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(Form,{onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:{span:6,offset:3}},/*#__PURE__*/React.createElement(\"h3\",{className:\"form-title\"},\"Registro de usuario\"),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"name\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Usuario\"),/*#__PURE__*/React.createElement(Form.Control,{name:\"username\",type:\"text\",value:this.state.username,onChange:this.handleInputChange})),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"mail\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Email\"),/*#__PURE__*/React.createElement(Form.Control,{name:\"email\",type:\"email\",value:this.state.email,onChange:this.handleInputChange})),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"pwd\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Contrase\\xF1a\"),/*#__PURE__*/React.createElement(Form.Control,{name:\"password\",type:\"password\",value:this.state.password,onChange:this.handleInputChange})),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"img\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Imagen de perfil\"),/*#__PURE__*/React.createElement(Form.Control,{name:\"profilePic\",type:\"file\",onChange:this.handleFileUpload})),/*#__PURE__*/React.createElement(\"p\",{className:\"error-message\",style:{display:this.state.errorMessage?'block':'none'}},this.state.errorMessage),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"button\",{className:\"form-button\",type:\"submit\"},\"Registrarme\"),/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"small\",null,\"\\xBFYa tienes cuenta? \",/*#__PURE__*/React.createElement(Link,{to:\"/login\",className:\"link-form\"},\"Inicia sesi\\xF3n\")))))));}}]);return Signup;}(Component);export default Signup;","map":{"version":3,"sources":["/home/hector/Escritorio/ironkack/project3/client/src/components/pages/signup/Signup.js"],"names":["React","Component","Link","Container","Row","Col","Form","AuthService","FileService","Signup","props","handleInputChange","e","userInfoCopy","state","userInfo","target","name","value","setState","handleSubmit","preventDefault","authService","signup","then","response","setTheUser","data","history","push","catch","err","status","errorMessage","message","handleFileUpload","uploadData","FormData","append","files","filesService","handleUpload","console","log","secure_url","profilePic","username","password","email","span","offset","display"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\n\nimport { Link } from 'react-router-dom'\n\nimport Container from 'react-bootstrap/Container'\nimport Row from 'react-bootstrap/Row'\nimport Col from 'react-bootstrap/Col'\nimport Form from 'react-bootstrap/Form'\n\nimport AuthService from './../../../service/auth.service'\nimport FileService from './../../../service/file.service'\n\nclass Signup extends Component {\n\n    constructor(props) {\n        super(props)\n        this.state = {\n            userInfo: {\n                username: '',\n                password: '',\n                email: '',\n                profilePic: ''\n            },\n            errorMessage: ''\n        }\n        this.authService = new AuthService()\n        this.filesService = new FileService()\n    }\n\n    handleInputChange = e => {\n\n        let userInfoCopy = { ...this.state.userInfo }\n        const { name, value } = e.target\n        userInfoCopy = { ...userInfoCopy, [name]: value }\n\n        this.setState({ userInfo: userInfoCopy })\n    }\n\n    handleSubmit = e => {\n        e.preventDefault()\n        this.authService.signup(this.state.userInfo)\n            .then(response => {\n                this.props.setTheUser(response.data)\n                this.props.history.push('/')\n            })\n            .catch(err => {\n                err.response.status === 400 && this.setState({ errorMessage: err.response.data.message })\n            })\n    }\n\n    handleFileUpload = e => {\n\n        const uploadData = new FormData()\n        uploadData.append(\"profilePic\", e.target.files[0])\n        this.filesService.handleUpload(uploadData)\n            .then(response => {\n                console.log('Subida de archivo finalizada! La URL de Cloudinray es: ', response.data.secure_url)\n                let userInfoCopy = { ...this.state.userInfo }\n                userInfoCopy = { ...userInfoCopy, profilePic: response.data.secure_url }\n                this.setState({ userInfo: userInfoCopy })\n            })\n            .catch(err => console.log(err))\n    }\n\n    render() {\n\n        return (\n\n            <Container>\n\n                <Form onSubmit={this.handleSubmit}>\n\n                    <Row>\n                        <Col md={{ span: 6, offset: 3 }}>\n                            <h3 className=\"form-title\">Registro de usuario</h3>\n                            <hr></hr>\n\n                            <Form.Group controlId=\"name\">\n                                <Form.Label>Usuario</Form.Label>\n                                <Form.Control name=\"username\" type=\"text\" value={this.state.username} onChange={this.handleInputChange} />\n                            </Form.Group>\n\n                            <Form.Group controlId=\"mail\">\n                                <Form.Label>Email</Form.Label>\n                                <Form.Control name=\"email\" type=\"email\" value={this.state.email} onChange={this.handleInputChange} />\n                            </Form.Group>\n\n                            <Form.Group controlId=\"pwd\">\n                                <Form.Label>Contraseña</Form.Label>\n                                <Form.Control name=\"password\" type=\"password\" value={this.state.password} onChange={this.handleInputChange} />\n                            </Form.Group>\n\n                            <Form.Group controlId=\"img\">\n                                <Form.Label>Imagen de perfil</Form.Label>\n                                <Form.Control name=\"profilePic\" type=\"file\" onChange={this.handleFileUpload} />\n                            </Form.Group>\n\n                            <p\n                                className='error-message'\n                                style={{ display: this.state.errorMessage ? 'block' : 'none' }}\n                            >{this.state.errorMessage}</p>\n                            <hr></hr>\n                            <button className=\"form-button\" type=\"submit\">Registrarme</button>\n\n                            <p><small>¿Ya tienes cuenta? <Link to=\"/login\" className=\"link-form\">Inicia sesión</Link></small></p>\n\n                        </Col>\n                    </Row>\n                </Form>\n\n            </Container>\n\n        )\n    }\n\n}\n\nexport default Signup"]},"metadata":{},"sourceType":"module"}