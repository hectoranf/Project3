{"ast":null,"code":"var _jsxFileName = \"/home/hector/Escritorio/ironkack/project3/client/src/components/pages/meeting/create/CreateMeetingForm.js\";\nimport React, { Component } from 'react';\nimport MediaService from './../../../../service/media.service';\nimport MeetingService from './../../../../service/meeting.service';\nimport './CreateMeetingForm.css';\nimport Container from 'react-bootstrap/Container';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Form from 'react-bootstrap/Form';\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\n\nclass CreateMeetingForm extends Component {\n  constructor(props) {\n    super(props);\n\n    this.createMeeting = () => {\n      this.meetingService.createMeeting(this.state.meeting).then(response => {\n        this.props.setTheUser(response.data);\n        this.props.history.push('/');\n      }).catch(err => console.log(err));\n    };\n\n    this.handleInputChange = e => {\n      let meetingCopy = { ...this.state.meeting\n      };\n      meetingCopy[e.target.name] = e.target.value;\n      this.setState({\n        meeting: meetingCopy\n      });\n    };\n\n    this.handleResultsVisibility = visibility => this.setState({ ...this.state,\n      resultVisibility: visibility\n    });\n\n    this.handleMouseOver = status => this.setState({ ...this.state,\n      mouseIsOver: status\n    });\n\n    this.setMedia = media => {\n      let mediaAux = {\n        title: '',\n        type: media.media_type,\n        idTMDB: media.id,\n        posterPic: media.poster_path\n      };\n      mediaAux.type === 'tv' ? mediaAux.title = media.name : mediaAux.title = media.title;\n      let meetingCopy = { ...this.state.meeting,\n        media: mediaAux\n      };\n      document.getElementById('media-title').value = mediaAux.title;\n      this.setState({\n        meeting: meetingCopy,\n        resultVisibility: 'none'\n      });\n    };\n\n    this.handleSearch = e => {\n      const value = e.target.value;\n\n      if (value.length > 0) {\n        this.handleResultsVisibility('block');\n        this.mediaService.getAll(value).then(response => {\n          this.setState({ ...this.state,\n            searchInput: value,\n            results: response.data.results.filter(elm => elm.media_type === 'tv' || elm.media_type === 'movie')\n          });\n        }).catch(err => console.log(err));\n      } else {\n        this.handleResultsVisibility('none');\n        this.setState({ ...this.state,\n          searchInput: value,\n          results: []\n        });\n      }\n    };\n\n    this.handleDate = date => {\n      let meetingCopy = { ...this.state.meeting\n      };\n      meetingCopy.date = date;\n      this.setState({\n        meeting: meetingCopy\n      });\n    };\n\n    this.handleLocation = e => {\n      const locationAux = this.props.user.places[e.target.value].location;\n      let meetingCopy = { ...this.state.meeting,\n        location: locationAux\n      };\n      this.setState({\n        meeting: meetingCopy\n      });\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      let meetingCopy = { ...this.state.meeting,\n        creator: this.props.user._id,\n        seats: this.state.meeting.freeSeats\n      };\n      if (meetingCopy.location.coordinates.length != 2) meetingCopy.location.coordinates = this.props.user.places[0].location.coordinates;\n      if (!meetingCopy.media.title) meetingCopy.media.title = this.state.searchInput;\n      this.setState({\n        meeting: meetingCopy\n      }, () => this.createMeeting());\n    };\n\n    this.state = {\n      meeting: {\n        meetingName: '',\n        media: {\n          title: '',\n          type: 'tv',\n          idTMDB: 1,\n          posterPic: ''\n        },\n        date: new Date(),\n        description: '',\n        seats: '',\n        freeSeats: 1,\n        creator: '',\n        location: {\n          type: 'Point',\n          coordinates: []\n        },\n        snackList: []\n      },\n      results: [],\n      resultVisibility: 'none',\n      mouseIsOver: 'false',\n      searchInput: ''\n    };\n    this.mediaService = new MediaService();\n    this.meetingService = new MeetingService();\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Container, {\n      className: \"creating-meeting\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      md: {\n        span: 8,\n        offset: 2\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 25\n      }\n    }, \"Datos de la quedada\"), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(Form, {\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Form.Group, {\n      controlId: \"media-title\",\n      onBlur: () => !this.state.mouseIsOver && this.handleResultsVisibility('none'),\n      onFocus: () => this.handleResultsVisibility('block'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 33\n      }\n    }, \"\\xBFQu\\xE9 vais a ver?\"), /*#__PURE__*/React.createElement(Form.Control, {\n      name: \"media-title\",\n      type: \"text\",\n      placeholder: \"Titulo...\",\n      onChange: this.handleSearch,\n      autoComplete: \"off\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(\"ul\", {\n      onMouseOver: () => this.handleMouseOver(true),\n      onMouseOut: () => this.handleMouseOver(false),\n      className: \"search-results\",\n      style: {\n        display: this.state.resultVisibility\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 33\n      }\n    }, this.state.results.map((elm, idx) => /*#__PURE__*/React.createElement(\"li\", {\n      key: idx,\n      onClick: () => this.setMedia(elm),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 75\n      }\n    }, elm.poster_path && /*#__PURE__*/React.createElement(\"img\", {\n      className: \"miniature\",\n      src: `http://image.tmdb.org/t/p/w92${elm.poster_path}`,\n      alt: \"poster\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 61\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 41\n      }\n    }, elm.media_type === 'tv' ? elm.name : elm.title))))), /*#__PURE__*/React.createElement(Form.Group, {\n      controlId: \"meetingName\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 33\n      }\n    }, \"Pon nombre a tu quedada\"), /*#__PURE__*/React.createElement(Form.Control, {\n      placeholder: \"Ej: marat\\xF3n de F\\xB7R\\xB7I\\xB7E\\xB7N\\xB7D\\xB7S\",\n      name: \"meetingName\",\n      type: \"textField\",\n      onChange: this.handleInputChange,\n      value: this.state.meeting.meetingName,\n      autoComplete: \"off\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(Form.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Form.Group, {\n      as: Col,\n      controlId: \"freeSeats\",\n      md: \"6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 37\n      }\n    }, \"\\xBFCuantos invitados quieres que asistan?\"), /*#__PURE__*/React.createElement(Form.Control, {\n      name: \"freeSeats\",\n      type: \"number\",\n      onChange: this.handleInputChange,\n      value: this.state.meeting.freeSeats,\n      autoComplete: \"off\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 37\n      }\n    })), /*#__PURE__*/React.createElement(Form.Group, {\n      as: Col,\n      controlId: \"date\",\n      md: \"6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 37\n      }\n    }, \"\\xBFCu\\xE1ndo va a ser?\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(DatePicker, {\n      className: \"form-date\",\n      showTimeSelect: true,\n      selected: this.state.meeting.date,\n      onChange: date => this.handleDate(date),\n      timeFormat: \"HH:mm\",\n      timeIntervals: 15,\n      timeCaption: \"time\",\n      dateFormat: \"yyyy/MM/dd hh:mm aa\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 37\n      }\n    }))), /*#__PURE__*/React.createElement(Form.Group, {\n      controlId: \"desc\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 33\n      }\n    }, \"Descripci\\xF3n\"), /*#__PURE__*/React.createElement(Form.Control, {\n      as: \"textarea\",\n      placeholder: \"Da a tus invitados una idea de c\\xF3mo va a ser la quedada\",\n      name: \"description\",\n      type: \"text\",\n      onChange: this.handleInputChange,\n      value: this.state.meeting.description,\n      autoComplete: \"off\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(Form.Group, {\n      controlId: \"location\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 33\n      }\n    }, \"\\xBFD\\xF3nde va a ser la quedada?\"), /*#__PURE__*/React.createElement(Form.Control, {\n      as: \"select\",\n      onChange: this.handleLocation,\n      custom: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 37\n      }\n    }, \"...\"), this.props.user && this.props.user.places.map((elm, idx) => /*#__PURE__*/React.createElement(\"option\", {\n      key: elm._id,\n      value: idx,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 98\n      }\n    }, elm.name)))), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"form-button\",\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 29\n      }\n    }, \"Crea tu quedada\")))));\n  }\n\n}\n\nexport default CreateMeetingForm;","map":{"version":3,"sources":["/home/hector/Escritorio/ironkack/project3/client/src/components/pages/meeting/create/CreateMeetingForm.js"],"names":["React","Component","MediaService","MeetingService","Container","Row","Col","Form","DatePicker","CreateMeetingForm","constructor","props","createMeeting","meetingService","state","meeting","then","response","setTheUser","data","history","push","catch","err","console","log","handleInputChange","e","meetingCopy","target","name","value","setState","handleResultsVisibility","visibility","resultVisibility","handleMouseOver","status","mouseIsOver","setMedia","media","mediaAux","title","type","media_type","idTMDB","id","posterPic","poster_path","document","getElementById","handleSearch","length","mediaService","getAll","searchInput","results","filter","elm","handleDate","date","handleLocation","locationAux","user","places","location","handleSubmit","preventDefault","creator","_id","seats","freeSeats","coordinates","meetingName","Date","description","snackList","render","span","offset","display","map","idx"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\n\nimport MediaService from './../../../../service/media.service'\nimport MeetingService from './../../../../service/meeting.service'\n\nimport './CreateMeetingForm.css'\n\nimport Container from 'react-bootstrap/Container'\nimport Row from 'react-bootstrap/Row'\nimport Col from 'react-bootstrap/Col'\nimport Form from 'react-bootstrap/Form'\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nclass CreateMeetingForm extends Component {\n\n    constructor(props) {\n        super(props)\n        this.state = {\n            meeting: {\n                meetingName: '',\n                media: {\n                    title: '',\n                    type: 'tv',\n                    idTMDB: 1,\n                    posterPic: ''\n                },\n                date: new Date(),\n                description: '',\n                seats: '',\n                freeSeats: 1,\n                creator: '',\n                location: {\n                    type: 'Point',\n                    coordinates: []\n                },\n                snackList: []\n            },\n            results: [],\n            resultVisibility: 'none',\n            mouseIsOver: 'false',\n            searchInput: ''\n        }\n        this.mediaService = new MediaService()\n        this.meetingService = new MeetingService()\n    }\n\n    createMeeting = () => {\n        this.meetingService.createMeeting(this.state.meeting)\n            .then(response => {\n                this.props.setTheUser(response.data)\n                this.props.history.push('/')\n            })\n            .catch(err => console.log(err))\n    }\n\n    handleInputChange = e => {\n        let meetingCopy = { ...this.state.meeting }\n        meetingCopy[e.target.name] = e.target.value\n        this.setState({\n            meeting: meetingCopy\n        })\n    }\n\n    handleResultsVisibility = visibility => this.setState({ ...this.state, resultVisibility: visibility })\n\n    handleMouseOver = status => this.setState({ ...this.state, mouseIsOver: status })\n\n    setMedia = (media) => {\n\n        let mediaAux = {\n            title: '',\n            type: media.media_type,\n            idTMDB: media.id,\n            posterPic: media.poster_path\n        }\n        mediaAux.type === 'tv' ? mediaAux.title = media.name : mediaAux.title = media.title\n\n        let meetingCopy = { ...this.state.meeting, media: mediaAux }\n        document.getElementById('media-title').value = mediaAux.title\n        this.setState({ meeting: meetingCopy, resultVisibility: 'none' })\n    }\n\n    handleSearch = e => {\n        const value = e.target.value\n        if (value.length > 0) {\n            this.handleResultsVisibility('block')\n            this.mediaService.getAll(value)\n                .then(response => {\n                    this.setState({ ...this.state, searchInput: value, results: response.data.results.filter(elm => (elm.media_type === 'tv' || elm.media_type === 'movie')) })\n                })\n                .catch(err => console.log(err))\n        } else {\n            this.handleResultsVisibility('none')\n            this.setState({ ...this.state, searchInput: value, results: [] })\n        }\n    }\n\n    handleDate = date => {\n        let meetingCopy = { ...this.state.meeting }\n        meetingCopy.date = date\n        this.setState({ meeting: meetingCopy })\n    }\n\n    handleLocation = e => {\n        const locationAux = this.props.user.places[e.target.value].location\n        let meetingCopy = { ...this.state.meeting, location: locationAux }\n        this.setState({ meeting: meetingCopy })\n    }\n\n    handleSubmit = e => {\n        e.preventDefault()\n        let meetingCopy = { ...this.state.meeting, creator: this.props.user._id, seats: this.state.meeting.freeSeats }\n        if (meetingCopy.location.coordinates.length != 2) meetingCopy.location.coordinates = this.props.user.places[0].location.coordinates\n        if (!meetingCopy.media.title) meetingCopy.media.title = this.state.searchInput\n        this.setState({ meeting: meetingCopy }, () => this.createMeeting())\n    }\n\n    render() {\n        return (\n\n            <Container className='creating-meeting'>\n                <Row>\n                    <Col md={{ span: 8, offset: 2 }}>\n                        <h1>Datos de la quedada</h1>\n                        <hr />\n                        <Form onSubmit={this.handleSubmit}>\n\n                            <Form.Group controlId=\"media-title\"\n                                onBlur={() => !this.state.mouseIsOver && this.handleResultsVisibility('none')}\n                                onFocus={() => this.handleResultsVisibility('block')}>\n                                <Form.Label>¿Qué vais a ver?</Form.Label>\n                                <Form.Control name=\"media-title\"\n                                    type=\"text\"\n                                    placeholder='Titulo...'\n                                    onChange={this.handleSearch}\n                                    autoComplete=\"off\"\n                                    required />\n\n                                <ul onMouseOver={() => this.handleMouseOver(true)} onMouseOut={() => this.handleMouseOver(false)} className='search-results' style={{ display: this.state.resultVisibility }}>\n                                    {this.state.results.map((elm, idx) => <li key={idx} onClick={() => this.setMedia(elm)}>\n                                        {elm.poster_path && <img className='miniature' src={`http://image.tmdb.org/t/p/w92${elm.poster_path}`} alt='poster' />}\n                                        <p>{elm.media_type === 'tv' ? elm.name : elm.title}</p>\n                                    </li>)}\n                                </ul>\n                            </Form.Group>\n\n                            <Form.Group controlId=\"meetingName\">\n                                <Form.Label>Pon nombre a tu quedada</Form.Label>\n                                <Form.Control\n                                    placeholder='Ej: maratón de F·R·I·E·N·D·S'\n                                    name=\"meetingName\"\n                                    type=\"textField\"\n                                    onChange={this.handleInputChange}\n                                    value={this.state.meeting.meetingName}\n                                    autoComplete=\"off\" />\n                            </Form.Group>\n\n                            <Form.Row>\n                                <Form.Group as={Col} controlId=\"freeSeats\" md=\"6\">\n                                    <Form.Label>¿Cuantos invitados quieres que asistan?</Form.Label>\n                                    <Form.Control\n                                        name=\"freeSeats\"\n                                        type=\"number\"\n                                        onChange={this.handleInputChange}\n                                        value={this.state.meeting.freeSeats}\n                                        autoComplete=\"off\" />\n                                </Form.Group>\n\n                                <Form.Group as={Col} controlId=\"date\" md='6'>\n                                    <Form.Label>¿Cuándo va a ser?</Form.Label>\n                                    <br />\n                                    <DatePicker\n                                        className='form-date'\n                                        showTimeSelect\n                                        selected={this.state.meeting.date}\n                                        onChange={date => this.handleDate(date)}\n                                        timeFormat=\"HH:mm\"\n                                        timeIntervals={15}\n                                        timeCaption=\"time\"\n                                        dateFormat=\"yyyy/MM/dd hh:mm aa\"\n                                    />\n                                </Form.Group>\n                            </Form.Row>\n\n                            <Form.Group controlId=\"desc\">\n                                <Form.Label>Descripción</Form.Label>\n                                <Form.Control as='textarea'\n                                    placeholder='Da a tus invitados una idea de cómo va a ser la quedada'\n                                    name=\"description\"\n                                    type=\"text\"\n                                    onChange={this.handleInputChange}\n                                    value={this.state.meeting.description}\n                                    autoComplete=\"off\" />\n                            </Form.Group>\n\n                            <Form.Group controlId=\"location\">\n                                <Form.Label>¿Dónde va a ser la quedada?</Form.Label>\n                                <Form.Control as=\"select\" onChange={this.handleLocation} custom>\n                                    <option value='0'>...</option>\n                                    {this.props.user && this.props.user.places.map((elm, idx) => <option key={elm._id} value={idx}>{elm.name}</option>)}\n                                </Form.Control>\n                            </Form.Group>\n\n                            <hr />\n                            <button className=\"form-button\" type=\"submit\">Crea tu quedada</button>\n                        </Form>\n                    </Col>\n                </Row>\n\n            </Container >\n\n        )\n    }\n\n}\n\nexport default CreateMeetingForm"]},"metadata":{},"sourceType":"module"}