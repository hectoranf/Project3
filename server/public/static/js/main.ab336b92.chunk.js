(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{137:function(e,t,a){e.exports=a(264)},143:function(e,t,a){},144:function(e,t,a){},145:function(e,t,a){},151:function(e,t,a){},188:function(e,t,a){},190:function(e,t,a){},191:function(e,t,a){},193:function(e,t,a){},264:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(32),s=a.n(l),i=a(12),c=a(13),o=a(15),u=a(14),m=a(21),h=(a(142),a(143),a(144),a(23)),d=a(88),g=a(59),p=(a(145),function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleSearch=function(e){return n.setState({searchValue:e.target.value})},n.handleSubmit=function(e){return e.preventDefault()},n.state={searchValue:""},n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(d.a,{className:"top-bar shadow-down",fixed:"top",expand:"md"},r.a.createElement(d.a.Brand,{as:"div",className:"logo"},r.a.createElement(h.b,{to:"/"},"the",r.a.createElement("span",{className:"bold-weight"},"Watch"),"men")),r.a.createElement(d.a.Toggle,{"aria-controls":"basic-navbar-nav"}),this.props.user?r.a.createElement("nav",null,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{type:"search",value:this.state.searchValue,onChange:this.handleSearch,placeholder:"\xbfQu\xe9 te apetece ver?"}),r.a.createElement(h.b,{className:"search-button",to:this.state.searchValue.length>0?"/meeting/find?title=".concat(this.state.searchValue):"/"},"Search")),r.a.createElement(h.c,{className:"form-button",to:"/meeting/create"},"Crea una quedada")):r.a.createElement(g.a,{className:"ml-auto"},r.a.createElement(g.a.Link,{as:"div",className:"ml-auto"},r.a.createElement(h.b,{to:"/login"},"Iniciar Sesion")),r.a.createElement(g.a.Link,{as:"div",className:"ml-auto"},r.a.createElement(h.b,{to:"/signup"},"Registro"))))}}]),a}(n.Component)),E=a(46),f=function(){return r.a.createElement(E.a,{as:"section",className:"landing-carousel"},r.a.createElement(E.a.Item,null,r.a.createElement("img",{className:"d-block w-100",src:"./img/landing/landing1.jpg",alt:"Landing Carrousel img"}),r.a.createElement(E.a.Caption,null,r.a.createElement("h3",null,"First slide label"),r.a.createElement("p",null,"Nulla vitae elit libero, a pharetra augue mollis interdum."))),r.a.createElement(E.a.Item,null,r.a.createElement("img",{className:"d-block w-100",src:"./img/landing/landing2.jpeg",alt:"Landing Carrousel img"}),r.a.createElement(E.a.Caption,null,r.a.createElement("h3",null,"First slide label"),r.a.createElement("p",null,"Nulla vitae elit libero, a pharetra augue mollis interdum."))),r.a.createElement(E.a.Item,null,r.a.createElement("img",{className:"d-block w-100",src:"./img/landing/landing3.jpeg",alt:"Landing Carrousel img"}),r.a.createElement(E.a.Caption,null,r.a.createElement("h3",null,"First slide label"),r.a.createElement("p",null,"Nulla vitae elit libero, a pharetra augue mollis interdum."))))},b=a(24),v=a(17),j=a(11),y=a(22),O=function(){return r.a.createElement(b.a,{as:"section"},r.a.createElement(v.a,null,r.a.createElement(j.a,{xl:3,lg:6},r.a.createElement(y.a,{as:"article"},r.a.createElement(y.a.Img,{variant:"top",src:"https://static.javatpoint.com/images/core/java-features.png"}),r.a.createElement(y.a.Body,null,r.a.createElement(y.a.Title,null,"Prueba"),r.a.createElement(y.a.Text,null,"Some quick example text to build on the card title and make up the bulk of the card's content.")))),r.a.createElement(j.a,{xl:3,lg:6},r.a.createElement(y.a,{as:"article"},r.a.createElement(y.a.Img,{variant:"top",src:"https://static.javatpoint.com/images/core/java-features.png"}),r.a.createElement(y.a.Body,null,r.a.createElement(y.a.Title,null,"Prueba"),r.a.createElement(y.a.Text,null,"Some quick example text to build on the card title and make up the bulk of the card's content.")))),r.a.createElement(j.a,{xl:3,lg:6},r.a.createElement(y.a,{as:"article"},r.a.createElement(y.a.Img,{variant:"top",src:"https://static.javatpoint.com/images/core/java-features.png"}),r.a.createElement(y.a.Body,null,r.a.createElement(y.a.Title,null,"Prueba"),r.a.createElement(y.a.Text,null,"Some quick example text to build on the card title and make up the bulk of the card's content.")))),r.a.createElement(j.a,{xl:3,lg:6},r.a.createElement(y.a,{as:"article"},r.a.createElement(y.a.Img,{variant:"top",src:"https://static.javatpoint.com/images/core/java-features.png"}),r.a.createElement(y.a.Body,null,r.a.createElement(y.a.Title,null,"Prueba"),r.a.createElement(y.a.Text,null,"Some quick example text to build on the card title and make up the bulk of the card's content."))))))},w=(a(151),function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={},e}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(f,null),r.a.createElement(O,null))}}]),a}(n.Component)),S=a(44),M=a(10),I=a(8),N=a(37),C=a.n(N),k=function e(){var t=this;Object(i.a)(this,e),this.signup=function(e){var a=e.username,n=e.password,r=e.email,l=e.profilePic;return t.service.post("/signup",{username:a,password:n,email:r,profilePic:l})},this.login=function(e){var a=e.username,n=e.password;return t.service.post("/login",{username:a,password:n})},this.logout=function(){return t.service.post("/logout")},this.isLoggedIn=function(){return t.service.get("/loggedin")},this.service=C.a.create({baseURL:"".concat("https://thewatchmen.herokuapp.com/api","/auth"),withCredentials:!0})},U=function e(){var t=this;Object(i.a)(this,e),this.handleUpload=function(e){return t.service.post("/upload",e)},this.service=C.a.create({baseURL:"".concat("https://thewatchmen.herokuapp.com/api","/files"),withCredentials:!0})},T=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){var t=Object(M.a)({},n.state.userInfo),a=e.target,r=a.name,l=a.value;t=Object(M.a)(Object(M.a)({},t),{},Object(S.a)({},r,l)),n.setState({userInfo:t})},n.handleSubmit=function(e){e.preventDefault(),n.authService.signup(n.state.userInfo).then((function(e){n.props.setTheUser(e.data),n.props.history.push("/")})).catch((function(e){400===e.response.status&&n.setState({errorMessage:e.response.data.message})}))},n.handleFileUpload=function(e){var t=new FormData;t.append("profilePic",e.target.files[0]),n.filesService.handleUpload(t).then((function(e){console.log("Subida de archivo finalizada! La URL de Cloudinray es: ",e.data.secure_url);var t=Object(M.a)({},n.state.userInfo);t=Object(M.a)(Object(M.a)({},t),{},{profilePic:e.data.secure_url}),n.setState({userInfo:t})})).catch((function(e){return console.log(e)}))},n.state={userInfo:{username:"",password:"",email:"",profilePic:""},errorMessage:""},n.authService=new k,n.filesService=new U,n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(b.a,null,r.a.createElement(I.a,{className:"form-style",onSubmit:this.handleSubmit},r.a.createElement(v.a,null,r.a.createElement(j.a,{md:{span:6,offset:3}},r.a.createElement("h3",{className:"form-title"},"Registro de usuario"),r.a.createElement("hr",null),r.a.createElement(I.a.Group,{controlId:"name"},r.a.createElement(I.a.Label,null,"Usuario"),r.a.createElement(I.a.Control,{name:"username",type:"text",value:this.state.username,onChange:this.handleInputChange})),r.a.createElement(I.a.Group,{controlId:"mail"},r.a.createElement(I.a.Label,null,"Email"),r.a.createElement(I.a.Control,{name:"email",type:"email",value:this.state.email,onChange:this.handleInputChange})),r.a.createElement(I.a.Group,{controlId:"pwd"},r.a.createElement(I.a.Label,null,"Contrase\xf1a"),r.a.createElement(I.a.Control,{name:"password",type:"password",value:this.state.password,onChange:this.handleInputChange})),r.a.createElement(I.a.Group,{controlId:"img"},r.a.createElement(I.a.Label,null,"Imagen de perfil"),r.a.createElement(I.a.Control,{name:"profilePic",type:"file",onChange:this.handleFileUpload})),r.a.createElement("p",{className:"error-message",style:{display:this.state.errorMessage?"block":"none"}},this.state.errorMessage),r.a.createElement("hr",null),r.a.createElement("button",{className:"form-button",type:"submit"},"Registrarme"),r.a.createElement("p",null,r.a.createElement("small",null,"\xbfYa tienes cuenta? ",r.a.createElement(h.b,{to:"/login",className:"link-form"},"Inicia sesi\xf3n")))))))}}]),a}(n.Component),P=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){var t=Object(M.a)({},n.state.loginInfo),a=e.target,r=a.name,l=a.value;t=Object(M.a)(Object(M.a)({},t),{},Object(S.a)({},r,l)),n.setState({loginInfo:t})},n.handleSubmit=function(e){e.preventDefault(),n.authService.login(n.state.loginInfo).then((function(e){n.props.setTheUser(e.data),n.props.history.push("/")})).catch((function(e){400===e.response.status&&n.setState({errorMessage:e.response.data.message})}))},n.state={loginInfo:{username:"",password:""},errorMessage:""},n.authService=new k,n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(b.a,null,r.a.createElement(v.a,null,r.a.createElement(j.a,{md:{span:6,offset:3}},r.a.createElement("h3",{className:"form-title"},"Inicio de sesi\xf3n"),r.a.createElement("hr",null),r.a.createElement(I.a,{className:"form-style",onSubmit:this.handleSubmit},r.a.createElement(I.a.Group,{controlId:"name"},r.a.createElement(I.a.Label,null,"Usuario"),r.a.createElement(I.a.Control,{name:"username",type:"text",value:this.state.username,onChange:this.handleInputChange})),r.a.createElement(I.a.Group,{controlId:"pwd"},r.a.createElement(I.a.Label,null,"Contrase\xf1a"),r.a.createElement(I.a.Control,{className:"form-input ",name:"password",type:"password",value:this.state.password,onChange:this.handleInputChange})),r.a.createElement("p",{className:"error-message",style:{display:this.state.errorMessage?"block":"none"}},this.state.errorMessage),r.a.createElement("hr",null),r.a.createElement("button",{className:"form-button",type:"submit"},"Iniciar sesi\xf3n")),r.a.createElement("p",null,r.a.createElement("small",null,"\xbfNo tienes cuenta? ",r.a.createElement(h.b,{to:"/signup",className:"link-form"},"Reg\xedstrate"))))))}}]),a}(n.Component),_=function e(){var t=this;Object(i.a)(this,e),this.getAllMeetings=function(){return t.service.get("/getAll")},this.getByTitle=function(e){return t.service.get("/media?title=".concat(e))},this.getById=function(e){return t.service.get("/".concat(e))},this.createMeeting=function(e){return t.service.post("/create",{meeting:e})},this.joinMeeting=function(e){return t.service.post("/".concat(e,"/join"))},this.postMessage=function(e,a){return t.service.post("/".concat(e,"/message"),{message:a})},this.service=C.a.create({baseURL:"".concat("https://thewatchmen.herokuapp.com/api","/meeting"),withCredentials:!0})},D=a(75),x=a(50),L=a(132),B=function(e){return r.a.createElement("figure",{className:"spinner"},r.a.createElement(L.a,{animation:"border",variant:"danger"}))},q=a(133),F=a.n(q);var R=function(){return r.a.createElement("div",{className:"marker"})},V=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={lat:40.4167754,lng:-3.7037901999999576},n.state={},n}return Object(c.a)(a,[{key:"handleDrag",value:function(e){console.log(e)}},{key:"render",value:function(){return r.a.createElement("div",{style:{height:this.props.height,width:this.props.width,zIndex:0,boxShadow:"0px 0px 8px 0px rgba(0, 0, 0, 0.2)"}},r.a.createElement(F.a,{bootstrapURLKeys:{key:"AIzaSyAgMxlbpkXQlAsUQWBUbN-toHutzEMyYCs"},defaultCenter:this.props.pos&&this.props.pos,defaultZoom:this.props.zoom,yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:function(e){e.map,e.maps}},this.props.meetings.map((function(e,t){return r.a.createElement(R,{key:t,lat:e.location.coordinates[0],lng:e.location.coordinates[1]})}))))}}]),a}(n.Component);V.defaultProps={center:{lat:40.4167754,lng:-3.7037901999999576},zoom:16};a(188);var A=function(e){return r.a.createElement(j.a,{md:{span:10,offset:1},as:"article"},r.a.createElement(h.b,{to:"/meeting/details/".concat(e._id),className:"search-card"},r.a.createElement("figure",{className:"red"},r.a.createElement("img",{src:e.media.posterPic?"http://image.tmdb.org/t/p/w154".concat(e.media.posterPic):"./img/poster/defaultPoster.jpg",alt:e.media.title}),r.a.createElement("h2",null,e.media.title)),r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement("h1",null,e.meetingName),r.a.createElement("hr",null),r.a.createElement("p",null,r.a.createElement("span",{className:"regular-weight"},"Fecha"),": ","".concat(e.date.getDate()," - ").concat(e.date.getMonth()+1," - ").concat(e.date.getFullYear())),r.a.createElement("p",null,r.a.createElement("span",{className:"regular-weight"},"Hora"),": ",e.date.getHours(),":",e.date.getMinutes()<10?"0".concat(e.date.getMinutes()):e.date.getMinutes()),r.a.createElement("p",null,r.a.createElement("span",{className:"regular-weight"},"Lugares disponibles"),": ",e.freeSeats))),r.a.createElement("figure",null,r.a.createElement("img",{className:"avatar",src:e.creator.profilePic,alt:e.creator.username}),r.a.createElement("h2",null,e.creator.username))))},G=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).getByTitle=function(e){n.meetingService.getByTitle(e).then((function(e){return n.setState({favouriteMeetings:e.data})})).catch((function(e){return console.log(e)}))},n.getMeetings=function(){n.meetingService.getAllMeetings().then((function(e){var t,a=e.data.filter((function(e){return e.creator._id!==n.props.user._id&&!e.participants.filter((function(e){return e===n.props.user._id})).length&&e.freeSeats>0}));a.map((function(e){return t=new Date(Date.parse(e.date)),e.date=t})),a.sort((function(e,t){return e.date-t.date}));var r=a.filter((function(e){return n.props.user.followingList.filter((function(t){return t.type===e.media.type&&t.idTMDB===e.media.idTMDB})).length>0}));n.setState({allMeetings:a,followingMeetings:r})})).catch((function(e){return console.log(e)}))},n.componentDidMount=function(){n.getMeetings()},n.state={followingMeetings:[],allMeetings:[]},n.meetingService=new _,n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(b.a,{className:"home",fluid:!0},this.state.allMeetings.length>0?r.a.createElement(D.a,{defaultActiveKey:this.state.followingMeetings.length>0?"following":"all",id:"uncontrolled-tab-example",className:"nav-tab"},r.a.createElement(x.a,{eventKey:"following",title:"Contenido que sigues"},r.a.createElement(V,{pos:this.props.user.places[0].location.coordinates,zoom:15,meetings:this.state.followingMeetings,width:"100%",height:"50vh",marker:!0}),r.a.createElement(v.a,{as:"section"},r.a.createElement(j.a,{md:"12"},r.a.createElement("header",null,r.a.createElement("hr",null),r.a.createElement("h1",null,"Quedadas de contenidos que sigues"))),this.state.followingMeetings.map((function(e){return r.a.createElement(A,Object.assign({key:e._id},e))})))),r.a.createElement(x.a,{eventKey:"all",title:"Todo los contenidos",className:"tab"},r.a.createElement(V,{pos:this.props.user.places[0].location.coordinates,zoom:15,meetings:this.state.allMeetings,width:"100%",height:"50vh",marker:!0}),r.a.createElement(v.a,{as:"section"},r.a.createElement(j.a,{md:"12"},r.a.createElement("header",null,r.a.createElement("hr",null),r.a.createElement("h1",null,"Todas las quedadas disponibles"))),this.state.allMeetings.map((function(e){return r.a.createElement(A,Object.assign({key:e._id},e))}))))):r.a.createElement(B,null))}}]),a}(n.Component),z=(a(190),function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).logout=function(){e.props.setTheUser(!1),e.authService.logout()},e.state={},e.authService=new k,e}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("aside",{className:"side-bar shadow-right"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("img",{src:this.props.user.profilePic,alt:this.props.user.username})," ",r.a.createElement("p",null,"Bienenido, ",this.props.user.username)),r.a.createElement("hr",null),r.a.createElement("li",null,r.a.createElement(h.c,{className:"side-link",to:"/"},"Inicio <")),r.a.createElement("li",null,r.a.createElement(h.c,{className:"side-link",to:"/meetings"},"Mis quedadas <")),r.a.createElement("li",null,r.a.createElement(h.c,{className:"side-link",to:"/following"},"Siguiendo <")),r.a.createElement("hr",null),r.a.createElement("li",null,r.a.createElement(h.c,{className:"side-link",to:"/",onClick:this.logout},"Cerrar sesi\xf3n"))))}}]),a}(n.Component)),H=function(e){return r.a.createElement(j.a,{md:"12"},r.a.createElement("article",{className:"meeting-message",style:{padding:0}},e.userId!==e.user._id&&r.a.createElement("figure",{className:"red"},r.a.createElement("img",{className:"user",src:e.user.profilePic,alt:e.user.username}),r.a.createElement("p",null,e.user.username)),r.a.createElement("div",{className:"text"},r.a.createElement("p",null,e.text)),e.userId===e.user._id&&r.a.createElement("figure",null,r.a.createElement("img",{className:"user",src:e.user.profilePic,alt:e.user.username}),r.a.createElement("p",null,e.user.username))))},Q=(a(191),function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).getMeeting=function(e){n.meetingService.getById(e).then((function(e){var t=new Date(e.data.date);e.data.date=t,e.data.messages.reverse(),n.setState({meeting:e.data,msg:""})})).catch((function(e){return console.log(e)}))},n.joinMeeting=function(){n.meetingService.joinMeeting(n.state.meeting._id).then((function(e){n.props.setTheUser(e.data),n.getMeeting(n.state.meeting._id)})).catch((function(e){return console.log(e)}))},n.handleInputChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(S.a)({},a,r))},n.handleSubmit=function(e){e.preventDefault(),n.state.msg&&n.meetingService.postMessage(n.state.meeting._id,{user:n.props.user._id,text:n.state.msg}).then((function(e){return n.getMeeting(n.state.meeting._id)})).catch((function(e){return console.log(e)}))},n.componentDidMount=function(){n.getMeeting(n.props.match.params.id)},n.state={meeting:null,msg:""},n.meetingService=new _,n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(b.a,{fluid:!0,className:"meeting-details"},this.state.meeting&&r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{as:"section"},r.a.createElement(j.a,{lg:{span:2,offset:0}},r.a.createElement("div",{className:"poster"},r.a.createElement("img",{src:this.state.meeting.media.posterPic?"http://image.tmdb.org/t/p/w154".concat(this.state.meeting.media.posterPic):"https://res.cloudinary.com/dba5fn3ws/image/upload/v1589985020/PosterDefault/defaultPoster_esgqhh.jpg",alt:this.state.meeting.media.title}))),r.a.createElement(j.a,{lg:{span:10,offset:0}},r.a.createElement("h2",null,this.state.meeting.media.title),r.a.createElement("h1",null,this.state.meeting.meetingName),r.a.createElement("br",null),!this.props.user.joinedMeetings.includes(this.state.meeting._id)&&this.state.meeting.freeSeats>0&&!this.props.user.createdMeetings.includes(this.state.meeting._id)&&r.a.createElement("button",{onClick:this.joinMeeting,className:"form-button"},"Ap\xfantate a esta quedada")),r.a.createElement(j.a,{lg:2},r.a.createElement("div",{className:"avatar"},r.a.createElement("img",{src:this.state.meeting.creator.profilePic,alt:this.state.meeting.creator.username}),r.a.createElement("h3",{className:"username"},this.state.meeting.creator.username))),r.a.createElement(j.a,{lg:4},r.a.createElement(v.a,null,r.a.createElement(j.a,{as:"article",lg:12},r.a.createElement("header",null,r.a.createElement("h3",null,"Descripci\xf3n")),r.a.createElement("p",null,this.state.meeting.description),r.a.createElement("hr",null)),r.a.createElement(j.a,{as:"article",lg:12},r.a.createElement("header",null,r.a.createElement("h3",null,"Invitados")),r.a.createElement("div",{className:"participants"},this.state.meeting.participants.map((function(e){return r.a.createElement("div",{key:e._id},r.a.createElement("img",{src:e.profilePic,alt:e.username})," ",r.a.createElement("h4",null,e.username))}))),r.a.createElement("hr",null)))),r.a.createElement(j.a,{lg:1,className:"separation"},r.a.createElement("div",null)),r.a.createElement(j.a,{lg:5},r.a.createElement(v.a,null,r.a.createElement(j.a,{lg:12,as:"article"},r.a.createElement("header",null,r.a.createElement("h3",null,"Datos")),r.a.createElement("p",null,r.a.createElement("span",{className:"regular-weight"},"Fecha"),": ","".concat(this.state.meeting.date.getDate()," - ").concat(this.state.meeting.date.getMonth()+1," - ").concat(this.state.meeting.date.getFullYear())),r.a.createElement("p",null,r.a.createElement("span",{className:"regular-weight"},"Hora"),": ",this.state.meeting.date.getHours()," : ",this.state.meeting.date.getMinutes()<10?"0".concat(this.state.meeting.date.getMinutes()):this.state.meeting.date.getMinutes()),r.a.createElement("p",null,r.a.createElement("span",{className:"regular-weight"},"Sitios libres"),": ",this.state.meeting.freeSeats),r.a.createElement("hr",null)),r.a.createElement(j.a,{as:"article",lg:12},r.a.createElement("header",null,r.a.createElement("h3",null,"Localizaci\xf3n")),r.a.createElement(V,{pos:this.state.meeting.location.coordinates,zoom:16,meetings:[this.state.meeting],width:"100%",height:"250px",marker:!0}),r.a.createElement("br",null),r.a.createElement("hr",null)),r.a.createElement(j.a,{as:"article",lg:12})))),r.a.createElement("hr",null),(this.props.user.joinedMeetings.includes(this.state.meeting._id)||this.props.user.createdMeetings.includes(this.state.meeting._id))&&r.a.createElement(v.a,{as:"section"},r.a.createElement(j.a,{md:{span:10,offset:1}},r.a.createElement("header",null,r.a.createElement("h3",null,"Mensajes")),r.a.createElement("br",null),r.a.createElement(I.a,{className:"form-style",onSubmit:this.handleSubmit},r.a.createElement(I.a.Group,{controlId:"name"},r.a.createElement(I.a.Control,{as:"textarea",placeholder:"Escribe un comentario...",rows:"3",name:"msg",type:"text",value:this.state.msg,onChange:this.handleInputChange})),r.a.createElement("button",{className:"form-button",type:"submit"},"Enviar"),r.a.createElement("br",null),r.a.createElement("br",null),this.state.meeting.messages.map((function(t,a){return r.a.createElement(H,Object.assign({key:a},t,{userId:e.props.user._id}))})))))))}}]),a}(n.Component)),K=a(101),Y=a.n(K),W=(a(192),function(e){return r.a.createElement("article",{className:"card"},r.a.createElement("img",{src:e.posterPic?"http://image.tmdb.org/t/p/w185".concat(e.posterPic):"./img/poster/defaultPoster.jpg",alt:e.title}),r.a.createElement("p",null,e.title))}),J=function e(){var t=this;Object(i.a)(this,e),this.getAll=function(e){return t.service.get("/getAll?title=".concat(e))},this.service=C.a.create({baseURL:"".concat("https://thewatchmen.herokuapp.com/api","/media"),withCredentials:!0})},X=a(68),Z=function e(){var t=this;Object(i.a)(this,e),this.follow=function(e){return t.service.post("/follow",{media:e})},this.service=C.a.create({baseURL:"".concat("https://thewatchmen.herokuapp.com/api","/user"),withCredentials:!0})},$=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){var t=e.target.value;t.length>0?(n.handleResultsVisibility("block"),n.mediaService.getAll(t).then((function(e){n.setState(Object(M.a)(Object(M.a)({},n.state),{},{searchInput:t,results:e.data.results.filter((function(e){return"tv"===e.media_type||"movie"===e.media_type}))}))})).catch((function(e){return console.log(e)}))):(n.handleResultsVisibility("none"),n.setState(Object(M.a)(Object(M.a)({},n.state),{},{searchInput:t,results:[]})))},n.handleResultsVisibility=function(e){return n.setState(Object(M.a)(Object(M.a)({},n.state),{},{resultVisibility:e}))},n.handleMouseOver=function(e){return n.setState(Object(M.a)(Object(M.a)({},n.state),{},{mouseIsOver:e}))},n.setMedia=function(e){var t={title:"",type:e.media_type,idTMDB:e.id,posterPic:e.poster_path};"tv"===t.type?t.title=e.name:t.title=e.title,document.getElementById("media-title").value=t.title,n.setState({media:t,resultVisibility:"none"})},n.followContent=function(){n.userService.follow(n.state.media).then((function(e){n.props.setTheUser(e.data),n.props.setFollowingLists(),n.props.closeModal()})).catch((function(e){return console.log(e)}))},n.handleSubmit=function(e){e.preventDefault(),n.props.user.followingList.filter((function(e){return e.type===n.state.media.type&&e.idTMDB===n.state.media.idTMDB})).length?n.setState({msg:"Ya sigues ese contenido"}):n.followContent()},n.state={media:{title:"",type:"tv",idTMDB:0,posterPic:""},results:[],resultVisibility:"none",mouseIsOver:"false",searchInput:"",msg:""},n.mediaService=new J,n.userService=new Z,n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(b.a,null,r.a.createElement(I.a,{onSubmit:this.handleSubmit},r.a.createElement("br",null),r.a.createElement(I.a.Group,{controlId:"media-title",onBlur:function(){return!e.state.mouseIsOver&&e.handleResultsVisibility("none")},onFocus:function(){return e.handleResultsVisibility("block")}},r.a.createElement(I.a.Control,{name:"media-title",type:"text",placeholder:"Titulo...",onChange:this.handleInputChange,autoComplete:"off",required:!0}),r.a.createElement("ul",{onMouseOver:function(){return e.handleMouseOver(!0)},onMouseOut:function(){return e.handleMouseOver(!1)},className:"search-results",style:{display:this.state.resultVisibility}},this.state.results.map((function(t,a){return r.a.createElement("li",{key:a,onClick:function(){return e.setMedia(t)}},t.poster_path&&r.a.createElement("img",{className:"miniature",src:"http://image.tmdb.org/t/p/w92".concat(t.poster_path),alt:"poster"}),r.a.createElement("p",null,"tv"===t.media_type?t.name:t.title))})))),r.a.createElement("hr",null),r.a.createElement("p",{className:this.state.msg&&"form-button"},this.state.msg),this.state.media.title&&r.a.createElement("article",null,r.a.createElement("img",{src:this.state.media.posterPic?"http://image.tmdb.org/t/p/w185".concat(this.state.media.posterPic):"./img/poster/defaultPoster.jpg",alt:this.state.media.title}),r.a.createElement("p",null,this.state.media.title),r.a.createElement("hr",null)),r.a.createElement("button",{className:"form-button",type:"submit"},"Seguir")))}}]),a}(n.Component),ee=(a(193),function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleModal=function(e){n.setState({modalShow:e})},n.setFollowingLists=function(){var e=[],t=[];n.props.user&&n.props.user.followingList.forEach((function(a){return"tv"===a.type?e.push(a):t.push(a)})),n.setState({tv:e.reverse(),movie:t.reverse()})},n.componentDidMount=function(){n.setFollowingLists()},n.state={tv:[],movie:[],modalShow:!1},n.MediaService=new J,n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"following"},r.a.createElement("h1",null,"Listas de tus favoritos"),r.a.createElement("section",null,r.a.createElement("header",null,r.a.createElement("h2",null,"Series que sigues"),r.a.createElement("button",{onClick:function(){return e.handleModal(!0)},className:"following-button"},"+")),this.state.tv.length>0&&r.a.createElement("hr",{className:"shadow-down"}),this.state.tv.length>0?r.a.createElement(Y.a,{slidesPerPage:4,slidesPerScroll:2,arrows:!0},this.state.tv.map((function(e){return r.a.createElement(W,Object.assign({key:e._id},e))}))):r.a.createElement("article",{className:"msg"},r.a.createElement("p",null,"No est\xe1s siguiendo ninguna serie")),this.state.tv.length>0&&r.a.createElement("hr",{className:"shadow-up"}),r.a.createElement("br",null)),r.a.createElement("section",null,r.a.createElement("header",null,r.a.createElement("h2",null,"Pel\xedculas que sigues"),r.a.createElement("button",{onClick:function(){return e.handleModal(!0)},className:"following-button"},"+")),this.state.movie.length>0&&r.a.createElement("hr",{className:"shadow-down"}),this.state.movie.length>0?r.a.createElement(Y.a,{slidesPerPage:4,slidesPerScroll:2,arrows:!0},this.state.movie.map((function(e){return r.a.createElement(W,Object.assign({key:e._id},e))}))):r.a.createElement("article",{className:"msg"},r.a.createElement("p",null,"No est\xe1s siguiendo ninguna pel\xedcula")),this.state.movie.length>0&&r.a.createElement("hr",{className:"shadow-up"})),r.a.createElement(X.a,{className:"following-modal",show:this.state.modalShow,onHide:function(){return e.handleModal(!1)},centered:!0},r.a.createElement(X.a.Header,{className:"shadow-down",closeButton:!0},r.a.createElement(X.a.Title,null,r.a.createElement("h4",null,"\xbfQu\xe9 te apetece seguir?"))),r.a.createElement(X.a.Body,null,r.a.createElement($,{user:this.props.user,setTheUser:this.props.setTheUser,closeModal:function(){return e.handleModal(!1)},setFollowingLists:this.setFollowingLists}))))}}]),a}(n.Component)),te=a(134),ae=a.n(te),ne=(a(194),function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).createMeeting=function(){n.meetingService.createMeeting(n.state.meeting).then((function(e){n.props.setTheUser(e.data),n.props.history.push("/")})).catch((function(e){return console.log(e)}))},n.handleInputChange=function(e){var t=Object(M.a)({},n.state.meeting);t[e.target.name]=e.target.value,n.setState({meeting:t})},n.handleResultsVisibility=function(e){return n.setState(Object(M.a)(Object(M.a)({},n.state),{},{resultVisibility:e}))},n.handleMouseOver=function(e){return n.setState(Object(M.a)(Object(M.a)({},n.state),{},{mouseIsOver:e}))},n.setMedia=function(e){var t={title:"",type:e.media_type,idTMDB:e.id,posterPic:e.poster_path};"tv"===t.type?t.title=e.name:t.title=e.title;var a=Object(M.a)(Object(M.a)({},n.state.meeting),{},{media:t});document.getElementById("media-title").value=t.title,n.setState({meeting:a,resultVisibility:"none"})},n.handleSearch=function(e){var t=e.target.value;t.length>0?(n.handleResultsVisibility("block"),n.mediaService.getAll(t).then((function(e){n.setState(Object(M.a)(Object(M.a)({},n.state),{},{searchInput:t,results:e.data.results.filter((function(e){return"tv"===e.media_type||"movie"===e.media_type}))}))})).catch((function(e){return console.log(e)}))):(n.handleResultsVisibility("none"),n.setState(Object(M.a)(Object(M.a)({},n.state),{},{searchInput:t,results:[]})))},n.handleDate=function(e){var t=Object(M.a)({},n.state.meeting);t.date=e,n.setState({meeting:t})},n.handleLocation=function(e){var t=n.props.user.places[e.target.value].location,a=Object(M.a)(Object(M.a)({},n.state.meeting),{},{location:t});n.setState({meeting:a})},n.handleSubmit=function(e){e.preventDefault();var t=Object(M.a)(Object(M.a)({},n.state.meeting),{},{creator:n.props.user._id,seats:n.state.meeting.freeSeats});2!==t.location.coordinates.length&&(t.location.coordinates=n.props.user.places[0].location.coordinates),t.media.title||(t.media.title=n.state.searchInput),n.setState({meeting:t},(function(){return n.createMeeting()}))},n.state={meeting:{meetingName:"",media:{title:"",type:"tv",idTMDB:1,posterPic:""},date:new Date,description:"",seats:"",freeSeats:1,creator:"",location:{type:"Point",coordinates:[]},snackList:[]},results:[],resultVisibility:"none",mouseIsOver:"false",searchInput:""},n.mediaService=new J,n.meetingService=new _,n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(b.a,{className:"creating-meeting"},r.a.createElement(v.a,null,r.a.createElement(j.a,{md:{span:8,offset:2}},r.a.createElement("h1",null,"Datos de la quedada"),r.a.createElement("hr",null),r.a.createElement(I.a,{onSubmit:this.handleSubmit},r.a.createElement(I.a.Group,{controlId:"media-title",onBlur:function(){return!e.state.mouseIsOver&&e.handleResultsVisibility("none")},onFocus:function(){return e.handleResultsVisibility("block")}},r.a.createElement(I.a.Label,null,"\xbfQu\xe9 vais a ver?"),r.a.createElement(I.a.Control,{name:"media-title",type:"text",placeholder:"Titulo...",onChange:this.handleSearch,autoComplete:"off",required:!0}),r.a.createElement("ul",{onMouseOver:function(){return e.handleMouseOver(!0)},onMouseOut:function(){return e.handleMouseOver(!1)},className:"search-results",style:{display:this.state.resultVisibility}},this.state.results.map((function(t,a){return r.a.createElement("li",{key:a,onClick:function(){return e.setMedia(t)}},t.poster_path&&r.a.createElement("img",{className:"miniature",src:"http://image.tmdb.org/t/p/w92".concat(t.poster_path),alt:"poster"}),r.a.createElement("p",null,"tv"===t.media_type?t.name:t.title))})))),r.a.createElement(I.a.Group,{controlId:"meetingName"},r.a.createElement(I.a.Label,null,"Pon nombre a tu quedada"),r.a.createElement(I.a.Control,{placeholder:"Ej: marat\xf3n de F\xb7R\xb7I\xb7E\xb7N\xb7D\xb7S",name:"meetingName",type:"textField",onChange:this.handleInputChange,value:this.state.meeting.meetingName,autoComplete:"off"})),r.a.createElement(I.a.Row,null,r.a.createElement(I.a.Group,{as:j.a,controlId:"freeSeats",md:"6"},r.a.createElement(I.a.Label,null,"\xbfCuantos invitados quieres que asistan?"),r.a.createElement(I.a.Control,{name:"freeSeats",type:"number",onChange:this.handleInputChange,value:this.state.meeting.freeSeats,autoComplete:"off"})),r.a.createElement(I.a.Group,{as:j.a,controlId:"date",md:"6"},r.a.createElement(I.a.Label,null,"\xbfCu\xe1ndo va a ser?"),r.a.createElement("br",null),r.a.createElement(ae.a,{className:"form-date",showTimeSelect:!0,selected:this.state.meeting.date,onChange:function(t){return e.handleDate(t)},timeFormat:"HH:mm",timeIntervals:15,timeCaption:"time",dateFormat:"yyyy/MM/dd hh:mm aa"}))),r.a.createElement(I.a.Group,{controlId:"desc"},r.a.createElement(I.a.Label,null,"Descripci\xf3n"),r.a.createElement(I.a.Control,{as:"textarea",placeholder:"Da a tus invitados una idea de c\xf3mo va a ser la quedada",name:"description",type:"text",onChange:this.handleInputChange,value:this.state.meeting.description,autoComplete:"off"})),r.a.createElement(I.a.Group,{controlId:"location"},r.a.createElement(I.a.Label,null,"\xbfD\xf3nde va a ser la quedada?"),r.a.createElement(I.a.Control,{as:"select",onChange:this.handleLocation,custom:!0},r.a.createElement("option",{value:"0"},"..."),this.props.user&&this.props.user.places.map((function(e,t){return r.a.createElement("option",{key:e._id,value:t},e.name)})))),r.a.createElement("hr",null),r.a.createElement("button",{className:"form-button",type:"submit"},"Crea tu quedada")))))}}]),a}(n.Component)),re=a(104),le=a.n(re),se=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).getMeetings=function(e){console.log(e),n.meetingService.getByTitle(e).then((function(e){var t,a=e.data.filter((function(e){return e.creator._id!==n.props.user._id&&!e.participants.filter((function(e){return e._id===n.props.user._id})).length&&e.freeSeats>0}));a.map((function(e){return t=new Date(Date.parse(e.date)),e.date=t})),a.sort((function(e,t){return e.date-t.date})),n.setState({foundMeetings:a})})).catch((function(e){return console.log(e)}))},n.state={title:"",foundMeetings:[]},n.meetingService=new _,n}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(){var e=this,t=le.a.parse(this.props.location.search);t.title!==this.state.title&&this.setState(Object(M.a)(Object(M.a)({},this.state),{},{title:t.title}),(function(){return e.getMeetings(e.state.title)}))}},{key:"componentDidMount",value:function(){var e=this,t=le.a.parse(this.props.location.search);this.setState(Object(M.a)(Object(M.a)({},this.state),{},{title:t.title}),(function(){return e.getMeetings(e.state.title)}))}},{key:"render",value:function(){return r.a.createElement(b.a,{className:"home",fluid:!0},r.a.createElement(v.a,{as:"section"},r.a.createElement(V,{pos:this.props.user.places[0].location.coordinates,zoom:15,meetings:this.state.foundMeetings,width:"100%",height:"50vh",marker:!0})),r.a.createElement(v.a,{as:"section"},r.a.createElement(j.a,{md:"12"},r.a.createElement("header",null,r.a.createElement("hr",null),r.a.createElement("h1",null,'Quedadas para ver "',this.state.title,'"'))),this.state.foundMeetings.map((function(e){return r.a.createElement(A,Object.assign({key:e._id},e))}))))}}]),a}(n.Component),ie=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){var e,t=[],a=[],r=[],l=[];n.props.user.createdMeetings.forEach((function(e){l.push(n.meetingService.getById(e))})),Promise.all(l).then((function(e){e.forEach((function(e){return t.push(e.data)})),l=[],n.props.user.joinedMeetings.forEach((function(e){return l.push(n.meetingService.getById(e))}))})).then((function(){return Promise.all(l)})).then((function(e){return e.forEach((function(e){return a.push(e.data)}))})).then((function(){t.forEach((function(t){e=new Date(Date.parse(t.date)),t.date=e})),t.sort((function(e,t){return e.date-t.date})),a.forEach((function(t){e=new Date(Date.parse(t.date)),t.date=e})),a.sort((function(e,t){return e.date-t.date})),(r=t.concat(a)).sort((function(e,t){return e.date-t.date})),n.setState({allMeetings:r,createdMeetings:t,joinedMeetings:a})})).catch((function(e){return console.log(e)}))},n.state={allMeetings:[],createdMeetings:[],joinedMeetings:[]},n.meetingService=new _,n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(b.a,{className:"home",fluid:!0},r.a.createElement(D.a,{defaultActiveKey:"all",id:"uncontrolled-tab-example",className:"nav-tab"},r.a.createElement(x.a,{eventKey:"all",title:"Todas tus quedadas"},r.a.createElement(v.a,{as:"section"},r.a.createElement(j.a,{md:"12"},r.a.createElement("header",null,r.a.createElement("h1",null,"Todas tus quedadas"))),this.state.allMeetings.map((function(e,t){return r.a.createElement(A,Object.assign({key:t},e))})))),r.a.createElement(x.a,{eventKey:"creator",title:"Creadas por ti",className:"tab"},r.a.createElement(v.a,{as:"section"},r.a.createElement(j.a,{md:"12"},r.a.createElement("header",null,r.a.createElement("h1",null,"Quedadas creadas por ti"))),this.state.createdMeetings.map((function(e,t){return r.a.createElement(A,Object.assign({key:t},e))})))),r.a.createElement(x.a,{eventKey:"participant",title:"Participas",className:"tab"},r.a.createElement(v.a,{as:"section"},r.a.createElement(j.a,{md:"12"},r.a.createElement("header",null,r.a.createElement("h1",null,"Quedadas en las que participas"))),this.state.joinedMeetings.map((function(e,t){return r.a.createElement(A,Object.assign({key:t},e))}))))))}}]),a}(n.Component),ce=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).setTheUser=function(t){return e.setState({loggedInUser:t},(function(){return console.log("El estado de App ha cambiado:",e.state)}))},e.fetchUser=function(){null===e.state.loggedInUser&&e.authService.isLoggedIn().then((function(t){return e.setTheUser(t.data)})).catch((function(){return e.setTheUser(!1)}))},e.state={loggedInUser:null},e.authService=new k,e}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return this.fetchUser(),r.a.createElement(r.a.Fragment,null,r.a.createElement(p,{user:this.state.loggedInUser}),this.state.loggedInUser&&r.a.createElement(z,{user:this.state.loggedInUser,setTheUser:this.setTheUser}),r.a.createElement("main",{style:{marginLeft:this.state.loggedInUser&&"250px"}},r.a.createElement(m.d,null,r.a.createElement(m.b,{path:"/",exact:!0,render:function(){return e.state.loggedInUser?r.a.createElement(G,{user:e.state.loggedInUser}):r.a.createElement(w,null)}}),r.a.createElement(m.b,{path:"/signup",render:function(t){return r.a.createElement(T,Object.assign({},t,{setTheUser:e.setTheUser}))}}),r.a.createElement(m.b,{path:"/login",render:function(t){return r.a.createElement(P,Object.assign({},t,{setTheUser:e.setTheUser}))}}),r.a.createElement(m.b,{path:"/meeting/details/:id",render:function(t){return e.state.loggedInUser?r.a.createElement(Q,Object.assign({},t,{user:e.state.loggedInUser,setTheUser:e.setTheUser})):r.a.createElement(m.a,{to:"/"})}}),r.a.createElement(m.b,{path:"/following",render:function(t){return e.state.loggedInUser?r.a.createElement(ee,Object.assign({},t,{user:e.state.loggedInUser,setTheUser:e.setTheUser})):r.a.createElement(m.a,{to:"/"})}}),r.a.createElement(m.b,{path:"/meeting/create",render:function(t){return e.state.loggedInUser?r.a.createElement(ne,Object.assign({},t,{user:e.state.loggedInUser,setTheUser:e.setTheUser})):r.a.createElement(m.a,{to:"/"})}}),r.a.createElement(m.b,{path:"/meeting/find",render:function(t){return e.state.loggedInUser?r.a.createElement(se,Object.assign({},t,{user:e.state.loggedInUser})):r.a.createElement(m.a,{to:"/"})}}),r.a.createElement(m.b,{path:"/meetings",render:function(t){return e.state.loggedInUser?r.a.createElement(ie,Object.assign({},t,{user:e.state.loggedInUser})):r.a.createElement(m.a,{to:"/"})}}))))}}]),a}(n.Component);s.a.render(r.a.createElement(h.a,null,r.a.createElement(ce,null)),document.getElementById("root"))}},[[137,1,2]]]);
//# sourceMappingURL=main.ab336b92.chunk.js.map